# MultiTracker
[TOC]

VIBE+Kalman+KM

主要框架参考： https://github.com/Smorodov/Multitarget-tracker
其中差异的地方：距离计算部分

- 使用的是马氏距离，用errCovPre来作为协方差（而不是errCovPost）。
  距离计算公式参考：[『3.距离计算公式』](https://blog.csdn.net/haronchou/article/details/112649684)
- 同时输入匈牙利算法的部分也是不一样的。
- 然后距离阈值用了8，而不是20；
- 还加入了visibility的部分
- 再加入工程代码中还额外统一了接口

# 1. 简单demo运行

代码来源：https://www.cnblogs.com/tornadomeet/archive/2012/08/19/2646412.html

KalmanEasyDemo中的demo代码来源：

- 代码来源于：https://blog.csdn.net/onezeros/article/details/6318944 复制粘贴得到
- 更多的easy例子参考：https://blog.csdn.net/haronchou/article/details/123335750
  - python源代码，以及主要的参数的改变会带来哪些影响？

# 2. 实际的一些问题

## 2.1 在低帧率low-fps中如何确保收敛性的？以及需要多少帧可以收敛？

==△t=2,4的情况，都有讨论过了，K和P的收敛值变高，收敛速度变快。==

- **如何判断是否收敛？** Xstate(posx,vx,posy,vy)， posx, posy.  kalman增益K=4×（）
  - 看kalman增益的表现，看xstate的posx和vx的表现。
  - 看自己的初始化值设置的怎么样，比如Qn，Rn，Yn+1的情况怎么样，观测到底噪声多大？

==Note：== ~~已经解决这个问题，在CSDN博客中，参数Δt的时间改为2,4后的变化已经了解~~

## 2.2 在未收敛时，不可靠的检测(如目标交错时)会带来哪些影响？

- **相当于是速度突变了，在收敛期的突变带来的影响较大**

## 2.3 如何进一步剔除明显的错误匹配

- **什么是错误匹配？**
  - 就是虽然ID和检测匹配了，但是由于距离计算的metric不鲁棒，他俩的距离计算出来很小。
  - 或者是，metric计算的距离也不小，但是匈牙利由于别的误差太大，显得这俩的距离小，又想尽量匹配，就强行匹配了。
  - **现象：就是折线的轨迹很多，明显不合理**
  - **原因：就是匈牙利的阈值取的太大！！！**
- 失败的尝试！！！！！
  - **动机**：企图去除不相关的匹配，让折线小一些。但是明显失败了！！ why？
  - **原因**：因为ID能维持起来的原因，还是在于稀疏性；也就是完全靠metric的差别来进行分配配比的！！！
    - 很可怕的原因在于：**混乱的初始化场景，混乱的速度突变**，kalman远未收敛，此处靠的是metric，而非kalman预测。
    - 继续寻找新的方案！！！
    - 使用kalman滤波不可行，因为只能是匀速模型。不能解决这个问题！！！！
      - 需要使用非线性的模型才行！！！ **短时匀速，可能就是几帧的问题**

## 2.4 distance metric的影响因素有啥？metric的类内相似、类间区别？

- metric的绝对值的影响多大？
- metric的相对值差异影响多大？
- 匈牙利对值的差异的容错度有多少？
- metric的鲁棒性如何？
- metric受哪些因素的影响？如何确保它一定准确？
- 如果不行，我们将如何解决这个问题？增加怎样的机制来确保这个问题？
  - 计算距离矩阵的时候，看检测框和预测框的距离，如果欧氏距离太远，砍掉。
  - 不能用绝对值，用相对值。

## 2.5 yolo如何与kalman结合起来，效果怎样？

## 2.6 粒子滤波的例子如何？与kalman比较优劣？





# P.S. makefile怎么根据windows和Linux的编译器不同而产生差异？